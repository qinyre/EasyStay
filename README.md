# EasyStay 易宿酒店预订平台

> 一个简易的基于 Node.js 本地文件系统的酒店预订平台 (后端部分已完工 ✅)

## 项目结构
- `server/`：后端服务集群 (Express)
- `docs/`：项目全量文档 (含 API 说明、前端分工说明)

## 如何启动后端服务 (成员C交付物)

由于后端需要提供 API 接口给移动端 (A) 和 PC 管理端 (B) 使用，请在联调前**务必先启动后端服务**。

### 1. 环境要求
- Node.js >= 16
- npm >= 8

### 2. 启动步骤

1. 打开终端，进入后端目录：
   ```bash
   cd server
   ```
2. 安装项目依赖：
   ```bash
   npm install
   ```
3. 启动开发服务器（支持热更新）：
   ```bash
   npm run dev
   # 或者使用常规启动: npm start
   ```
4. 看到控制台输出以下内容即代表启动成功：
   ```
   Server is running on http://localhost:3000
   ```

### 3. API 联调测试指南 (⭐️ 极度推荐 ⭐️)

为了方便前后端联调，后端已在内部集成了 **Swagger 在线接口文档**（支持在线一键发起请求，无需 Postman！）：
请在启动后端服务后，用浏览器访问：
👉 [http://localhost:3000/api-docs](http://localhost:3000/api-docs)

所有的参数要求、字段说明、Zod 安全校验规则都在网页上写得清清楚楚。如果遇到带小锁头的接口，只需要在页面右上角的 `Authorize` 里输入你登录后拿到的 token 即可。

## 针对前端成员(A和B)的联调注意事项

1. **接口前缀**：所有业务接口均以 `/api/v1/` 开头。
2. **严格的 Zod 校验**：由于后端加了 Zod 字段数据校验，如果请求收到 `400` 错误（包含提示：数据格式校验失败），请务必检查请求体参数是否遗漏，或者字段格式/长度不符合规范。
2. **返回结构**：后端严格遵循文档约定，所有响应结构均为：
   ```json
   {
     "code": 200, 
     "data": { ... }, 
     "message": "success"
   }
   ```
3. **权限校验**：商户和管理员的接口必须在 Header 中携带 Token：
   ```
   Authorization: Bearer <你从登录接口拿到的Token>
   ```
4. 请严格阅读 `docs/Agent.md` 第 5、6 节关于排序、参数传递及数据类型的约定。
